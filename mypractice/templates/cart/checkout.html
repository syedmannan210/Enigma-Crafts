{% extends "base.html" %}

{% block content %}
<title>Checkout</title>
{% load static %}

<head>
    {% load cart_tag %}
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .summary-block { border-bottom: 2px solid #d7d9de; }
.summary-block:last-child { border-bottom: 0px; }
.summary-content { padding: 28px 0px; }
.summary-price { color: #094bde; font-size: 20px; font-weight: 400; letter-spacing: -1px; margin-bottom: 0px; display: inline-block; float: right; }
.summary-small-text { font-weight: 700; font-size: 12px; color: #8f929a; }
.summary-text { margin-bottom: -10px; }
.summary-title { font-weight: 700; font-size: 14px; color: #1c1e22; }
.summary-head { display: inline-block; width: 120px; }

.widget { margin-bottom: 30px; background-color: #e9ebef; padding: 50px; border-radius: 6px; }
.widget:last-child { border-bottom: 0px; }
.widget-title { color: #094bde; font-size: 16px; font-weight: 700; text-transform: uppercase; margin-bottom: 25px; letter-spacing: 1px; display: table; line-height: 1; }
    </style>
</head>

<body>
<div class="container">
    <section class="section" id="chefs">
        <div class="col my-4">
            <h2 class="my-4">Enigma Crafts - Enter Address & Other Details:</h2>
<!--            <form method="post" action="{% url 'create-checkout-session' %}"> {% csrf_token %}-->
            <form method="post" action="{% url 'placeorder' %}"> {% csrf_token %}
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Name</label>
                        <input type="text" class="form-control" id="name" value="{{ user.first_name }} {{ user.last_name }}" name="name" placeholder="Name" readonly>
                    </div>
                    <div class="form-group col-md-6">
                        <label >Email</label>
                        <input type="email" class="form-control" id="email" value="{{user.email}}" name="email" placeholder="Email" readonly>
                        <input type="hidden" class="form-control" id="order_id" value="{{order_id}}" name="order_id">
                        <input type="hidden" class="form-control"  value="{{payment}}" name="payment">
                    </div>
                </div>
                <div class="form-group">
                    <label >Address</label>
                    <input type="text" class="form-control" id="address1" name="address1" placeholder="1234 Main St" required="true">
                </div>
                <div class="form-group">
                    <label >Address line 2</label>
                    <input type="text" class="form-control" id="address2" name="address2" placeholder="Apartment, studio, or floor">
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label >City</label>
                        <input type="text" class="form-control" id="city" name="city" required="true">
                    </div>
                    <div class="form-group col-md-4">
                        <label >State</label>
                        <input type="text" class="form-control" id="state" name="state" placeholder="Enter State" required="true">
                    </div>
                    <div class="form-group col-md-2">
                        <label >Zip</label>
                        <input type="text" class="form-control" id="zip_code" name="zip_code" required="true">
                    </div>
                </div>
                <div class="form-group">
                    <label >Phone Number</label>
                    <input type="tel" class="form-control" id="phone" name="phone" required="true">
<!--                    <input type="text" class="form-control" value="{{order_id}}" name="phone" >-->
                </div>
    <div class="widget">
        <h4 class="widget-title">Order Summary</h4>
        <table class="table">
         <thead>
                <tr>
                    <th>Product Name</th>
                    <th class="text-center">Quantity</th>
                    <th class="text-center">Unit Price</th>
                    <th class="text-center">Total</th>
                </tr>
            </thead>
            <tbody>
            {% for key,value in request.session.cart.items %}
            <tr>
                    <td>
            <div class="product-info">
                                <h4 class="product-title">{{value.name}}</h4>
                            </div>
            </div>
                    </td>
                <td class="text-center text-lg text-medium">{{value.quantity}}</td>
                <td class="text-center text-lg text-medium">Rs. {{ value.price}}</td>
                <td class="text-center text-lg text-medium">Rs. {{ value.price|multiply:value.quantity }}
                </td>
            {% endfor %}
            </tbody>
        </table>
        <div class="summary-block">
            <div class="summary-content">
               <div class="summary-head"> <h5 class="summary-title">Shipping</h5></div>
                <div class="summary-price">
                    <p class="summary-text">Rs. 200</p>
                </div>
            </div>
        </div>
        <div class="summary-block">
            <div class="summary-content">
               <div class="summary-head"> <h5 class="summary-title">Grand Total</h5></div>
                <div class="summary-price">
                    <p class="summary-text" >Rs. {{cart_total_amount | add:200}}</p>
                    <input type="hidden" class="form-control" id="amount" name="amount" value="{{cart_total_amount | add:200}}">
                </div>
            </div>
        </div>
       <a href=""><button type="submit" class="btn btn-danger my-4">Proceed to Pay</button></a>
    </form>
        </div>
    </section>
    </div>

<script src="{% static 'js/jquery-2.1.0.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{% static 'js/popper.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<!-- Plugins -->
<script src="{% static 'js/owl-carousel.js' %}"></script>
<script src="{% static 'js/accordions.js' %}"></script>
<script src="{% static 'js/datepicker.js' %}"></script>
<script src="{% static 'js/scrollreveal.min.js' %}"></script>
<script src="{% static 'js/waypoints.min.js' %}"></script>
<script src="{% static 'js/jquery.counterup.min.js' %}"></script>
<script src="{% static 'js/imgfix.min.js' %}"></script>
<script src="{% static 'js/slick.js' %}"></script>
<script src="{% static 'js/lightbox.js' %}"></script>
<script src="{% static 'js/isotope.js' %}"></script>

<!-- Global Init -->
<script src="{% static 'js/custom.js' %}"></script>

    <script>

        $(function() {
            var selectedClass = "";
            $("p").click(function(){
            selectedClass = $(this).attr("data-rel");
            $("#portfolio").fadeTo(50, 0.1);
                $("#portfolio div").not("."+selectedClass).fadeOut();
            setTimeout(function() {
              $("."+selectedClass).fadeIn();
              $("#portfolio").fadeTo(50, 1);
            }, 500);

            });
        });

    </script>

</body>


{% endblock %}


{% include "footer.html" %}